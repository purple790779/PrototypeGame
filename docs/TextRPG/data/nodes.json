[
  {
    "node_id": "HUB_GUILD",
    "title": "길드 게시판",
    "situation": "초보 모험가 등록을 마친 당신. 게시판에는 세 장의 의뢰가 걸려 있다.",
    "event_pool": ["E-SOCIAL-001"],
    "choices": [
      { "text": "쉬움: 하수구 쥐 소탕", "next_node": "MISSION_RATS_1" },
      { "text": "보통: 상인 호위", "next_node": "MISSION_ESCORT_1" },
      { "text": "도박: 폐허 조사", "next_node": "MISSION_RUINS_1" }
    ]
  },
  {
    "node_id": "MISSION_RATS_1",
    "title": "하수구 입구",
    "situation": "젖은 돌과 비릿한 냄새가 몰려온다. 안쪽에서 소리가 난다.",
    "event_pool": ["E-TRAP-001", "E-REST-001"],
    "choices": [
      { "text": "천천히 진입한다 (평판+1)", "impact": { "trust": 1 }, "next_node": "MISSION_RATS_2" },
      { "text": "급하게 내려간다 (HP-3, 부상+1)", "impact": { "hp": -3, "insight": 1 }, "next_node": "MISSION_RATS_2" }
    ]
  },
  {
    "node_id": "MISSION_RATS_2",
    "title": "쥐 둥지",
    "situation": "쥐들이 몰려들기 시작한다. 선택을 빠르게 해야 한다.",
    "event_pool": ["E-LOOT-001", "E-TRAP-002"],
    "choices": [
      { "text": "횃불로 몰아낸다 (골드+6)", "impact": { "gold": 6 }, "next_node": "MISSION_RATS_3" },
      { "text": "손으로 정리한다 (평판+1, 부상+1)", "impact": { "trust": 1, "insight": 1 }, "next_node": "MISSION_RATS_3" }
    ]
  },
  {
    "node_id": "MISSION_RATS_3",
    "title": "쥐 소탕 완료",
    "situation": "작업은 끝났다. 정리하고 나갈 시간이다.",
    "event_pool": ["E-LOOT-002"],
    "choices": [
      { "text": "증거물을 챙긴다 (골드+10)", "impact": { "gold": 10 }, "next_node": "RETURN_SETTLE" },
      { "text": "빠르게 철수한다 (HP+2)", "impact": { "hp": 2 }, "next_node": "RETURN_SETTLE" }
    ]
  },
  {
    "node_id": "MISSION_ESCORT_1",
    "title": "호위 출발",
    "situation": "상인이 마차를 끌고 출발한다. 길은 험하지 않지만 변수는 많다.",
    "event_pool": ["E-SOCIAL-002", "E-RISK-001"],
    "choices": [
      { "text": "정석 경로로 이동 (평판+1)", "impact": { "trust": 1 }, "next_node": "MISSION_ESCORT_2" },
      { "text": "지름길을 제안 (골드+4, 부상+1)", "impact": { "gold": 4, "insight": 1 }, "next_node": "MISSION_ESCORT_2" }
    ]
  },
  {
    "node_id": "MISSION_ESCORT_2",
    "title": "매복",
    "situation": "숲길에서 기척이 사라진다. 누군가 숨었다.",
    "event_pool": ["E-TRAP-003", "E-SHORTCUT-001"],
    "choices": [
      { "text": "매복을 돌파한다 (전투)", "start_combat": "corrupted_scout", "next_node": "MISSION_ESCORT_3" },
      { "text": "상인을 숨긴다 (평판+1, 골드-4)", "impact": { "trust": 1, "gold": -4 }, "next_node": "MISSION_ESCORT_3" }
    ]
  },
  {
    "node_id": "MISSION_ESCORT_3",
    "title": "무사 도착",
    "situation": "도착했다. 상인은 약속한 보수를 꺼낸다.",
    "event_pool": ["E-LOOT-003"],
    "choices": [
      { "text": "보수를 확실히 받는다 (골드+20)", "impact": { "gold": 20 }, "next_node": "RETURN_SETTLE" },
      { "text": "평판을 챙긴다 (평판+2)", "impact": { "trust": 2 }, "next_node": "RETURN_SETTLE" }
    ]
  },
  {
    "node_id": "MISSION_RUINS_1",
    "title": "폐허 입구",
    "situation": "깨진 기둥과 먼지가 가득하다. 바닥이 불안하다.",
    "event_pool": ["E-TRAP-004", "E-RISK-002"],
    "choices": [
      { "text": "조심히 조사한다 (부상+1)", "impact": { "insight": 1 }, "next_node": "MISSION_RUINS_2" },
      { "text": "무작정 돌입 (HP-4)", "impact": { "hp": -4 }, "next_node": "MISSION_RUINS_2" }
    ]
  },
  {
    "node_id": "MISSION_RUINS_2",
    "title": "붕괴 복도",
    "situation": "복도가 무너지기 직전이다. 그림자가 움직인다.",
    "event_pool": ["E-LOOT-004", "E-SHORTCUT-002"],
    "choices": [
      { "text": "전진하며 수색 (골드+8, 부상+1)", "impact": { "gold": 8, "insight": 1 }, "next_node": "MISSION_RUINS_3" },
      { "text": "그림자와 조우 (전투)", "start_combat": "ash_wisp", "next_node": "MISSION_RUINS_3" }
    ]
  },
  {
    "node_id": "MISSION_RUINS_3",
    "title": "탈출로",
    "situation": "더 머물수록 위험하다. 이제 정리해야 한다.",
    "event_pool": ["E-RISK-003"],
    "choices": [
      { "text": "전리품을 챙긴다 (골드+30, 부상+1)", "impact": { "gold": 30, "insight": 1 }, "next_node": "RETURN_SETTLE" },
      { "text": "도망친다 (HP-3)", "impact": { "hp": -3 }, "next_node": "RETURN_SETTLE" }
    ]
  },
  {
    "node_id": "RETURN_SETTLE",
    "title": "정산",
    "situation": "길드가 보고서를 정리한다. 다음 선택은 당신 몫이다.",
    "event_pool": ["E-REST-002"],
    "choices": [
      { "text": "정산 후 다음 의뢰 보기", "next_node": "HUB_GUILD" },
      { "text": "여정을 정리한다(엔딩 체크)", "next_node": "END_CHECK" }
    ]
  },
  {
    "node_id": "END_CHECK",
    "title": "결산",
    "situation": "지금까지의 성과와 상처가 결말을 정한다.",
    "event_pool": [],
    "choices": [
      {
        "text": "부유한 은퇴 (골드 200+)",
        "requirements": { "min_gold": 200 },
        "ending_id": "ENDING_RETIRE_RICH"
      },
      {
        "text": "길드의 영웅 (평판 10+)",
        "requirements": { "min_trust": 10 },
        "ending_id": "ENDING_GUILD_HERO"
      },
      {
        "text": "탈진한 은퇴 (부상 10+)",
        "requirements": { "min_insight": 10 },
        "ending_id": "ENDING_WORN_OUT"
      },
      {
        "text": "파산 (골드 -50 이하)",
        "requirements": { "max_gold": -50 },
        "ending_id": "ENDING_DEBT"
      },
      {
        "text": "불운한 결말 (부상 6+ / 평판 -3 이하)",
        "requirements": { "min_insight": 6, "max_trust": -3 },
        "ending_id": "ENDING_BAD_LUCK"
      },
      {
        "text": "그만두기: 평범한 귀환",
        "ending_id": "ENDING_FIRST_STEP"
      },
      { "text": "계속한다", "next_node": "HUB_GUILD" }
    ]
  }
]
