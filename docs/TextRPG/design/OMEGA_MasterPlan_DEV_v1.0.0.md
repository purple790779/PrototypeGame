# 프로젝트 오메가 – 에테르의 눈물
## 통합 마스터 기획서 (DEV) v1.0.0

> ⚠️ **스포일러 경고(중요)**  
> 이 문서는 **엔딩/반전/복선**을 포함합니다.  
> **플레이어로 직접 처음 체험하고 싶다면 이 파일을 읽지 마세요.**  
> 이 파일은 개발용(또는 Codex/협업자 전달용)입니다.

---

## 0. 한 줄 요약

웹 기반 텍스트 스토리 RPG.  
**D20 판정 + 턴제 전투 + 선택(성향/플래그) 기반 분기**를 중심으로, 후반에 **“정화는 거짓이며 성녀 엘라라는 심연의 지배자”**라는 반전이 드러나 엔딩이 갈라진다.

---

## 1. 프로젝트 개요

- **장르**: 웹 기반 텍스트 스토리텔링 RPG
- **플랫폼**: Web (HTML5/JS/CSS, 프레임워크는 React/Vue 권장)
- **핵심 가치**
  - 내러티브 몰입(텍스트 질감/연출)
  - D20 기반의 전략적 판정과 리스크
  - 인과응보형 선택지(플래그/수치로 결과가 축적)
- **세계관**: 에테르가드(Aethelgard) — 마력의 근원 **에테르**가 ‘오염’되어 멸망해가는 판타지 세계

---

## 2. 플레이 경험 목표(UX Pillars)

1) **결정의 무게**: 작은 선택이 신뢰/진실/세계 상태를 바꾼다.  
2) **주사위의 드라마**: 굴림이 손맛(연출+피드백)으로 체감된다.  
3) **불편한 의심**: “뭔가 이상하다” 이벤트가 서서히 쌓여 반전을 정당화한다.  
4) **엔딩의 메시지**: 정답이 아니라 ‘대가’를 보여주는 결말.

---

## 3. 핵심 게임 루프(Core Loop)

1. **이동/탐험(Encounter Roll)**  
2. **이벤트 발생(Condition → Check → Result)**  
3. **결과 적용(HP/스탯/아이템/플래그/수치 변화)**  
4. **전투 또는 회복/상점/조우**  
5. **메인 노드(스토리 분기점) 진행**  
6. **성물/단서 수집 누적 → 후반 선택지 확장 → 엔딩 판정**

---

## 4. 시스템 설계

### 4.1 스탯(Stats)

**기본 4스탯(필수)**
- **STR**(근력): 물리 공격/파괴 판정
- **DEX**(민첩): 회피/행동 우선권/정밀 판정
- **INT**(지능): 마법/지식/해독
- **LUK**(운): 치명타/랜덤 이벤트 유리

**확장 스탯(권장)**
- **CHA**(매력): 설득/협상/상점 할인
- **CON**(체력): 중독/오염 저항, 지속 피해/버티기

> 구현 팁: UI에는 기본 4스탯을 우선 노출하고, CHA/CON은 이벤트/아이템에서 자연스럽게 등장시키며 점진 해금.

---

### 4.2 D20 판정 규칙

- 기본 굴림: **1~20**
- 공식:  
  **D20 + (능력치 보정) + (장비/스킬/환경/숙련 보정) ≥ DC**
- **Natural 20**: 대성공(무조건 성공 + 보너스)
- **Natural 1**: 대실패(무조건 실패 + 패널티)

#### DC 가이드(권장)
- DC 8~10: 쉬움
- DC 11~13: 보통
- DC 14~16: 어려움
- DC 17~19: 매우 어려움
- DC 20: 의지/운명급

---

### 4.3 전투 시스템(턴제 + AC)

- **턴 순서**: (DEX 보정 + D20) 높은 순
- **명중 판정**: 공격자 (D20+공격 보정) vs 방어자 **AC**
- **피해**: 무기 기본 피해 + (스탯 보정)
- **상태이상**: 출혈/기절/오염(에테르 중독)/중독 등

#### 전투 보정(고급 규칙)
- **숙련도**: 특정 무기/스킬 반복 사용 시 영구 +1~+5
- **환경 패널티**: 밤/안개/오염 구역 판정 -2
- **시너지(Advantage)**: 특정 조합 시 D20 두 번 굴려 높은 값(예: 불의 반지+화염검)
- **연승 보너스**: 연속 승리 시 D20 +1 누적(최대 +3)
- **절망의 일격**: HP 10% 이하 시 D20 두 번 굴려 높은 값(생존 드라마)

---

### 4.4 이벤트 엔진(Condition → Check → Result)

모든 이벤트는 다음 구조를 갖는다.

- **Condition**: 발생 조건(지역, 난이도, 플래그, 소지품, 성향 수치 등)
- **Check**: 스탯/스킬 기반 판정 또는 선택(무판정도 가능)
- **Result**: 보상/패널티, 플래그, 수치 변화, 다음 노드

#### 이벤트 희귀도
- **Common**: 언제든 발생
- **Rare**: 특정 아이템/성향/플래그 조건
- **Fixed**: 메인 스토리 분기점에서 반드시 발생

#### 이벤트 카테고리(권장 최소 구성)
- **Combat/Crisis**: 매복, 균열, 오염 촉수 등
- **Environment/Traps**: 다리 붕괴, 환각 안개, 퍼즐 봉인, 독가스실 등
- **Moral/Social**: 굶주린 아이, 이단 심문, 밀수 제안, 탈영병 등
- **Skill/Reward/Item**: 해독, 설득, 상인, 위험한 약물 등
- **Glitch/Meta(복선)**: “뭔가 잘못되었다”를 체감시키는 이상현상 이벤트

---

## 5. 스토리 구조(메인 플롯)

### 5.1 프롤로그: 기억의 파편
- 플레이어는 ‘성스러운 정화자’로 깨어난다.
- 목표: **5개의 성물**을 모아 **천공의 탑**에서 정화 의식을 치른다.

### 5.2 중반부: 여정의 고난
- 대륙 횡단 중 영웅의 후예/생존자/이단자들과 조우.
- 그들은 “정화는 거짓이다”라 경고하지만,
- 성녀 ‘엘라라’는 “그들이 오염되어 미친 것”이라며 처단을 유도.

### 5.3 종반부: 천공의 탑
- 성물 수집 완료 후 탑 정상 도달.
- 마지막 수호자 처단 직전 “우리는 세상을 지키려 했다…”라는 유언.

---

## 6. 핵심 반전(Grand Twist) — **스포일러**

- 플레이어가 처단해온 ‘괴물’과 ‘미친 영웅’은 **세계의 진짜 수호자**였다.
- 플레이어가 모은 ‘성물’은 정화 도구가 아니라 **세계 보호막을 해제하는 봉인 해제 장치**였다.
- 성녀 엘라라의 정체는 **봉인된 ‘심연의 지배자’ 본인**.
- 플레이어는 꼭두각시가 되어 스스로 세계의 마지막 방어선을 무너뜨렸다.

> 목적: 플레이어가 “나는 선이었다”에서 “나는 시스템에 이용당했다”로 이동하도록 설계한다.

---

## 7. 분기 구조(성향/수치/단서의 통합)

### 7.1 성향(Ethos) 3갈래
- **Zealot(질서의 수호자)**: 엘라라 절대복종
- **Seeker(고독한 추적자)**: 진실 탐구, 단서 수집
- **Rebel(혼돈의 반역자)**: 체제 부정, 파괴/계약

> 성향은 “선악”이 아니라 **접근 방식**이며, 각 성향은 고유 이벤트/선택지를 가진다.

### 7.2 엔딩 결정 3요소(필수)
- **Trust(신뢰도)**: 엘라라/질서에 얼마나 순응했는가
- **Insight(진실도)**: 단서/모순을 얼마나 수집했는가
- **Destiny(운명)**: 마지막 순간 D20 판정(DC 15~20)

### 7.3 단서(Clues) 시스템
- 단서는 “반전 이해도”를 정량화하며,
- **단서량**에 따라 최종장에서:
  - 대화 선택지 확장
  - 선제공격/제3의 선택지/히든 엔딩 조건 접근 가능

---

## 8. 엔딩 설계

### 8.1 4대 대표 엔딩(메인)
1) **정화된 낙원(The Sterile Paradise)**  
   - Trust 높음 / Insight 낮음 / 마지막 전투 승리  
   - 결과: ‘오염(자유의지)’이 지워져 세계가 깨끗해지지만, 모두 인형처럼 반복한다.  
   - 반전: 플레이어는 영원한 감시자로 박제.

2) **심연의 왕좌(The Monarch of Void)**  
   - Trust 낮음 / Insight 중간 / 엘라라 처단 후 권력 선택  
   - 결과: 로그/근원 제어권 획득 → 재편 시도  
   - 반전: 권력에 잠식되어 더 잔혹한 독재자가 되고 순환의 일부가 됨.

3) **인간의 새벽(The Age of Frailty)**  
   - Insight 최대 + 특정 아이템(예: 부서진 거울) + D20 성공(DC 18)  
   - 결과: ‘에테르 엔진’을 파괴 → 마법과 신비가 사라짐  
   - 메시지: 짧고 고통스럽지만 **스스로 생각하는 진짜 삶**.

4) **영원의 메아리(The Eternal Echo, 히든)**  
   - 모든 동료 생존 + Insight 최대 + 마지막 D20=20(크리티컬)  
   - 결과: 시스템 오류(엘라라)만 삭제하고, 플레이어는 ‘삭제’  
   - 반전/감정: 아무도 기억하지 못하지만, 세상은 자유를 얻음.

### 8.2 12엔딩 아카이브(확장)
- 위 4개를 큰 줄기로 두고, 플래그/동료 생존/성물 처리/계약 여부 등에 따라
  **세부 변형 8개**를 추가해 총 12개로 구성한다.

---

## 9. 콘텐츠 설계: 이벤트 DB & 노드

### 9.1 이벤트 ID 규칙(권장)
- Combat: `E-C###`
- Trap/Env: `E-T###`
- Moral/Social: `E-M###`
- Skill/Check: `E-S###`
- Item/Reward: `E-I###`
- Glitch/Meta: `E-G###`
- Deep Lore(후반/히든): `E-H###`

### 9.2 메이저 분기 노드(예)
- ACT1: 성역 탈출(정문 돌파 vs 하수도 잠입)
- ACT2: 다섯 성물의 행방(방문 순서/난이도 동적 조정)
- ACT3: 진실의 문(단서량에 따른 대화/선택 확장)
- FINAL: 천공의 탑(엔딩 변수 + 운명 판정)

---

## 10. 데이터 구조(권장 스키마)

> **목표**: 이벤트/노드/아이템/적을 **완전 데이터 기반(JSON)**으로 만들어,  
> 콘텐츠 추가/수정이 “코드 수정 없이” 가능하도록 한다.

### 10.1 Enemy 예시
```json
{
  "id": "fallen_knight",
  "name": "타락한 성기사",
  "hp": 120,
  "ac": 15,
  "stats": { "str": 3, "dex": 1, "int": 0, "luk": 0 },
  "skills": ["smite_strike", "iron_wall"],
  "loot_table": ["gold_small", "holy_shard"]
}
```

### 10.2 Item 예시
```json
{
  "id": "sun_sword",
  "name": "태양의 검",
  "type": "weapon",
  "bonus": { "to_hit": 3, "damage": 2 },
  "scales_with": "STR",
  "tags": ["holy", "artifact"],
  "description": "빛나는 도신을 가진 검. 명중 보정 +3"
}
```

### 10.3 Event 예시(Condition → Check → Result)
```json
{
  "id": "E-T002",
  "title": "무너지는 다리",
  "rarity": "common",
  "category": "trap",
  "condition": { "biome": ["forest", "canyon"], "min_difficulty": 1 },
  "check": { "type": "stat", "stat": "DEX", "dc": 15 },
  "results": {
    "success": { "text": "당신은 균형을 잡고 무사히 건넜다.", "effects": [] },
    "fail": { "text": "발을 헛디뎌 부상을 입었다.", "effects": [{ "hp": -8 }] },
    "crit_success": { "text": "완벽한 도약! 숨겨진 주머니를 발견했다.", "effects": [{ "item": "gold_small" }] },
    "crit_fail": { "text": "난간이 부서지며 추락했다!", "effects": [{ "hp": -15 }, { "flag_add": "trauma_bridge" }] }
  }
}
```

### 10.4 Node(스토리 분기) 예시
```json
{
  "node_id": "ACT2_CROSSROAD_05",
  "situation": "당신은 다리를 지키는 '눈먼 기사'와 마주쳤다.",
  "choices": [
    { "text": "그를 죽이고 통과한다 (전투)", "impact": { "trust": 2, "insight": -1, "flags_add": ["knight_dead"] }, "next_node": "ACT3_DARK_PATH" },
    { "text": "거짓을 폭로한다 (INT DC 18)", "impact": { "insight": 2, "flags_add": ["truth_revealed"] }, "next_node": "ACT3_ALLIED_PATH" },
    { "text": "눈을 고쳐주겠다고 제안한다 (태양의 눈물 필요)", "requirements": { "items": ["sun_tears"] }, "impact": { "insight": 3, "trust": -1, "unlocks": ["LEGENDARY_WEAPON"] }, "next_node": "ACT3_HIDDEN_END" }
  ]
}
```

### 10.5 Save 데이터(권장)
```json
{
  "version": "v1.0.0",
  "player": { "hp": 42, "max_hp": 60, "stats": { "STR": 2, "DEX": 3, "INT": 1, "LUK": 0, "CHA": 0, "CON": 1 } },
  "resources": { "gold": 120 },
  "counters": { "trust": 7, "insight": 4 },
  "flags": ["relic_1", "saw_glitch_001"],
  "inventory": ["sun_sword", "potion_small"],
  "node": "ACT2_CROSSROAD_05"
}
```

---

## 11. 기술/구현 가이드(웹)

### 11.1 권장 폴더 구조
```
/src
  /engine      (dice, checks, combat, event runner)
  /data        (json loader, validators)
  /ui          (story view, choices, log, dice animation)
  /audio       (sfx/bgm handlers)
/assets
  /sfx
  /bgm
/data
  enemies.json
  items.json
  events.json
  nodes.json
  endings.json
```

### 11.2 저장
- 1차: LocalStorage 자동 저장(노드/체력/플래그)
- 2차(선택): 클라우드(로그인/계정) 확장 가능

### 11.3 연출(강력 권장)
- **타자기 효과**(Typing effect)
- **화면 흔들림**(치명타/대실패/보스 패턴)
- **주사위 애니메이션** + 사운드(굴림→정지→결과 강조)
- 반전 타이밍에 **엠비언스 → 불협화음** 전환

---

## 12. 밸런스/테스트 체크리스트

- DC/AC가 “체감 난이도”에 맞는지(초반 과도한 실패 금지)
- Rare 이벤트가 “조건 만족 시 보상”으로 느껴지는지
- Glitch 이벤트가 너무 노골적이지 않게 “의심”만 심는지
- 엔딩 진입 조건(특히 히든)이 ‘공략’ 없이는 불가능하지 않게 설계됐는지
- 텍스트 가독성(모바일 폰트/대비/줄간격)

---

## 13. 마일스톤(권장)

- M0: 데이터 스키마 확정 + 10개 이벤트 + 5개 적 + 10개 아이템
- M1: 전투/이벤트 루프 완성(프로토타입)
- M2: ACT1~2(분기 노드 8~12개) + Glitch 이벤트 10개
- M3: 엔딩 4개 구현 + 세이브/로드 안정화
- M4: 12엔딩 확장 + 콘텐츠 300+ 이벤트 규모로 확장

---

## 14. “플레이어가 스포일러 없이 즐기게 하는” 운영 팁

- 개발자가 이 문서를 보더라도, **게임 내에서는 반전 관련 단어를 직접 노출하지 않는다.**
- Glitch 이벤트는 “이상함”을 주되, 정답(심연/시스템)을 말하지 않는다.
- 선택지 문구는 ‘선악’처럼 보이게 만들지 말고 **신념/현실/효율**의 갈등으로 구성한다.

---

(끝)
