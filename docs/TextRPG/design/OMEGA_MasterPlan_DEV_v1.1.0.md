# 프로젝트 오메가 – 길드의 첫 의뢰
## 통합 마스터 기획서 (DEV) v1.1.0
> 문서 갱신일: 2026-01-09  
> ⚠️ **개발자용(스포일러 포함)**: 엔딩 조건/숨겨진 시스템을 포함할 수 있습니다.  
> 플레이어로 “처음 체험”하고 싶다면 **플레이어용 퀵스타트(스포일러 프리)**만 보세요.

---

## 0. 한 줄 요약
웹 기반 텍스트 RPG.  
플레이어는 **초보 모험가**로서 길드 게시판의 **의뢰(퀘스트)**를 반복 수행하며 **전투(D20+AC)**, **리스크/보상 선택**, **장비·자원 관리**로 성장한다.  
누적된 선택과 상태(평판/부상/부/악명 등)에 따라 **여러 멀티 엔딩**으로 마무리된다.

---

## 1. 프로젝트 개요
- **장르**: 웹 기반 텍스트 전술/관리 RPG(라이트 로그라이크 감성)
- **플랫폼**: Web (HTML/JS/CSS, GitHub Pages)
- **핵심 재미**: 짧은 런(의뢰 1~3개) → 성장/해금 → 다음 런에서 더 멀리
- **톤**: 영웅 서사보다는 “현실적인 길드 모험가 생활”(담백/유머/판타지)

---

## 2. 플레이 경험 목표(UX Pillars)
1) **즉시 플레이**: 시작 10초 안에 의뢰 선택 → 진행  
2) **짧고 반복 가능한 루프**: 3~8분 단위로 한 의뢰 완주 가능  
3) **결과가 명확**: 선택 = 보상/부상/평판/악명 등 숫자로 즉시 피드백  
4) **성장 체감**: 장비/스탯/해금이 “다음 의뢰의 선택지”를 넓힘  
5) **모바일 우선 UI**: 한 화면에 필수 정보(HP/MP/Gold) + 나머지는 패널/툴팁

---

## 3. 핵심 게임 루프(Core Loop)
**(허브) 길드/마을**  
→ 의뢰 선택(난이도/보상/리스크)  
→ **(현장) 탐험 노드**(이벤트/전투/자원 소모)  
→ **(귀환) 정산**(골드/평판 변화, 부상/상태 유지)  
→ 상점/휴식/장비 교체  
→ 다음 의뢰 또는 엔딩(조건 충족 시)

---

## 4. 시스템 설계

### 4.1 스탯(Stats)
- **HP**: 체력(0이면 실패/후퇴/엔딩 분기)
- **MP**: 마력(특수 행동/스킬/아이템 사용 자원)
- **Gold**: 골드(구매/치료/업그레이드)
- **STR/DEX/INT/LUK**: 기본 능력치
- **Reputation(평판)**: 길드/마을 신뢰도(의뢰 해금, 좋은 엔딩에 영향)
- **Notoriety(악명)**: 비열한 선택/약탈/도주 누적(위험 의뢰 해금 또는 나쁜 엔딩)
- **Injury(부상)**: 누적 패널티(치료 비용↑, 일부 판정 불리)

> 기존 데이터/엔진이 `trust/insight` 등을 사용 중이면  
> **표기만** `trust → 평판`, `insight → 숙련/정보`로 치환해도 됨.

---

### 4.2 D20 판정 규칙
- 기본: **D20 + (관련 스탯 보정)** vs **DC**
- 성공: 보상/유리한 분기
- 실패: 자원 소모/부상/전투 유도/시간 지연

#### DC 가이드(권장)
- 8: 쉬움(초보도 자주 성공)
- 12: 보통(준비하면 성공)
- 15: 어려움(특화/장비 필요)
- 18: 매우 어려움(고위험 고보상)

---

### 4.3 전투 시스템(턴제 + AC)
- **명중 판정**: 공격자 (D20+공격 보정) vs 방어자 **AC**
- **피해**: 무기/스킬 기본 피해 + 보정
- **상태이상**: 출혈/중독/기절/부상 누적 등
- **도주**: DEX 판정 성공 시 전투 종료(대신 평판↓ 혹은 악명↑)

#### 권장 단순화(현재 구현 우선)
- “전투 판정” 버튼/주사위 탭 1회 = 플레이어 공격 → 적 반격(생존하면)  
- 로그는 최근 8~12줄만 표시(모바일)

---

### 4.4 퀘스트(의뢰) 시스템
- **의뢰 등급**: 쉬움 / 보통 / 도박(고위험) / 정예(해금)
- **보상**: Gold + 평판 + 전리품(드랍)
- **리스크**: 부상/상태이상/시간 소모/악명
- **해금**: 평판/악명/특정 전리품/클리어 횟수 조건으로 신규 의뢰/상점 아이템 추가

---

### 4.5 이벤트 엔진(Condition → Check → Result)
- 이벤트는 스토리보다 **게임 결과 중심**으로 짧게 작성
- 예: “함정 발견(DEX DC12) → 성공: 전리품 / 실패: HP- / 부상+”
- 이벤트 카테고리(권장)
  - 전리품/상점/회복
  - 함정/재난
  - 전투 유도
  - 평판/악명 변화(선택형)

---

## 5. 멀티 엔딩 설계(조건 기반)
> 엔딩 텍스트는 짧게, 조건은 명확하게. “서사”는 최소, “결과”는 선명하게.

### 5.1 엔딩 후보(최소 8개 권장)
- **ENDING_RETIRE_RICH**: Gold ≥ 200 (부유한 은퇴)
- **ENDING_GUILD_HERO**: Reputation ≥ 10 (길드의 영웅)
- **ENDING_MASTER_HUNTER**: 특정 몬스터 처치/전리품 누적 (전설 사냥꾼)
- **ENDING_OUTLAW**: Notoriety ≥ 10 (현상금범)
- **ENDING_CURSED_WANDERER**: 부상/저주 플래그 누적 (저주받은 방랑)
- **ENDING_DEBT**: Gold ≤ -50 또는 치료비 미지급 누적 (파산)
- **ENDING_PEACEFUL**: 위험 의뢰 회피 + 평판 중간 (소시민 엔딩)
- **ENDING_MISSING**: 고위험 선택 누적 + 실패 (실종)

> 구현 방식:
- (권장) 마지막 “정산 노드”에서 조건 체크 → `ending_id` 분기  
- 또는 엔진이 `requirements`를 지원한다면 선택지에 조건을 걸어 엔딩 선택지를 노출

---

## 6. 콘텐츠 구조(노드/의뢰 루프)
### 6.1 기본 노드 유형
- **HUB_GUILD**: 길드 게시판(의뢰 선택)
- **MISSION_* **: 의뢰 현장(이벤트/전투)
- **RETURN_SETTLE**: 귀환 정산(보상/부상 반영)
- **SHOP/REST**: 구매/회복(옵션)
- **END_CHECK**: 엔딩 조건 체크

### 6.2 최소 콘텐츠 목표(초기)
- 의뢰 6종(각 3~6노드)
- 이벤트 20종
- 적 8종
- 아이템 12종(회복/장비/소모품)
- 엔딩 8종

---

## 7. 데이터 설계(권장 스키마)
> 현재 프로젝트는 JSON 기반 데이터 드리븐 구성이므로, “텍스트/수치”를 데이터로 옮겨 리플레이성을 확보한다.

### 7.1 Node 예시(허브)
```json
{
  "node_id": "HUB_GUILD",
  "title": "길드 게시판",
  "situation": "초보 모험가 등록을 마친 당신. 게시판에는 세 장의 의뢰가 걸려 있다.",
  "event_pool": ["E-REST-001"],
  "choices": [
    { "text": "쉬움: 하수구 쥐 소탕", "impact": {"reputation": 1}, "next_node": "MISSION_RATS_1" },
    { "text": "보통: 상인 호위", "impact": {"reputation": 1}, "next_node": "MISSION_ESCORT_1" },
    { "text": "도박: 폐허 조사", "impact": {"notoriety": 1}, "next_node": "MISSION_RUINS_1" }
  ]
}
```

### 7.2 Node 예시(전투 유도)
```json
{
  "node_id": "MISSION_RUINS_2",
  "title": "무너진 복도",
  "situation": "돌가루가 날린다. 무언가가 어둠 속에서 꿈틀거린다.",
  "event_pool": ["E-TRAP-002", "E-LOOT-004"],
  "choices": [
    { "text": "조심히 전진(DEX)", "impact": {"skill": 1}, "next_node": "MISSION_RUINS_3" },
    { "text": "정면 돌파(전투)", "start_combat": "rift_knight", "next_node": "MISSION_RUINS_3" }
  ]
}
```

### 7.3 Ending 예시
```json
{
  "ending_id": "ENDING_GUILD_HERO",
  "title": "길드의 영웅",
  "summary": "당신의 이름은 게시판의 금빛 액자에 걸렸다. 초보는 이제 전설의 초입이다."
}
```

---

## 8. UI/UX 방향(모험가이야기 감성 목표)
- 상단: HP/MP/Gold 아이콘형 요약
- 패널: 상태/장비/가방/로그는 버튼으로 열기
- 전투: 큰 주사위(행동) + HP바 + 최근 로그만

---

## 9. 로드맵(권장)
- **v0.3.0**: 컨셉 피벗(길드 허브/의뢰 루프/멀티 엔딩 기본)
- **v0.3.1~0.3.3**: 장비/상점/부상 치료, 의뢰 해금
- **v0.4.x**: 메타 해금(업적/도감/패시브), 난이도/랭크
- **v0.5.x**: 콘텐츠 확장(지역/보스/정예 의뢰)

---

## 10. 기술/구현 가이드(웹)
### 10.1 권장 폴더 구조
- docs/TextRPG/
  - index.html, main.js, style.css
  - data/ (nodes/events/items/enemies/endings)
  - design/ (본 기획서)

### 10.2 저장
- localStorage 저장 + “저장” 버튼 제공
- 긴급 복구: `?reset=1`

### 10.3 배포/캐시
- GitHub Pages 캐시를 피하기 위해 `main.js?v=...`, `style.css?v=...` 사용 권장
